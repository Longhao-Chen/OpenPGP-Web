<!DOCTYPE html>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='black'>
<meta name='format-detection' content='telephone=no'>
<html>
<head>
<meta charset="utf-8">
<title>设置</title>
<link href="../css/style.css" rel="stylesheet" type="text/css" />
<link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.5.0/css/bootstrap.min.css">
<script src="https://cdn.staticfile.org/jquery/3.5.1/jquery.min.js" integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2" crossorigin="anonymous"></script>
<script src="https://cdn.staticfile.org/twitter-bootstrap/4.5.0/js/bootstrap.bundle.min.js" integrity="sha384-1CmrxMRARb6aLqgBO7yyAxTOQE2AKb9GfXnEo760AUcUmFx3ibVJJAzGytlQcNXd" crossorigin="anonymous"></script>
<script src="https://cdn.staticfile.org/twitter-bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
<script src="../js/dark.js"></script>
<script src="../js/storepub.js"></script>
<script src="../js/storepri.js"></script>
<script>
$(function(){
	if(Setting.dark.mode===0)
		document.getElementById("darksetting").innerHTML="禁用";
	if(Setting.dark.mode===1)
		document.getElementById("darksetting").innerHTML="启用";
	if(Setting.dark.mode===2)
		document.getElementById("darksetting").innerHTML="随时间变化";
})
function Setdark(mode){
	Setting.dark.set(mode);
	if(mode===0)
		document.getElementById("darksetting").innerHTML="禁用";
	if(mode===1)
		document.getElementById("darksetting").innerHTML="启用";
	if(mode===2)
		document.getElementById("darksetting").innerHTML="随时间变化";
}
function reset(){
	if(window.confirm("请确认恢复默认设置\n注意：此操作不可撤销")){
		localStorage.removeItem("setting");
		alert("已恢复默认设置，刷新后生效");
	}
}
</script>
</head>
<body class="container-fluid center mx-auto">
<script>
	$(function(){
		$(".loader").fadeOut("slow");
	});
</script>
<div class="loader"></div>
<h1>设置</h1>
<div class="col btn-group-vertical mx-auto" style="width: 80%;">
	<button data-toggle="collapse" data-target="#dark" class="btn btn-light">暗主题设置</button>
	<div id="dark" class="collapse mx-auto" data-parent="body" style="width: 80%;">
		<div class="dropdown">
			<button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" id="darksetting" style="width: 100%;">
			</button>
			<div class="dropdown-menu" style="width: 100%;">
				<a class="dropdown-item" onclick="Setdark(0)">禁用</a>
				<a class="dropdown-item" onclick="Setdark(1)">启用</a>
				<a class="dropdown-item" onclick="Setdark(2)">随时间变化</a>
			</div>
		</div>
	</div>
	<hr>
	<button data-toggle="collapse" data-target="#cleandata" class="btn btn-danger">清除数据</button>
	<div id="cleandata" class="collapse mx-auto" data-parent="body" style="width: 80%;">
		<div class="dropdown" >
			<hr>
			<button class="btn btn-danger" onclick="reset();" style="width: 100%;">恢复默认设置</button><hr>
			<button class="btn btn-danger" onclick="PubDelAll()" style="width: 100%;">删除所有公钥</button><hr>
			<button class="btn btn-danger" onclick="PriDelAll()" style="width: 100%;">删除所有私钥</button>
		</div>
	</div>
</div>
</body>
</html>